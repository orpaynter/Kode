var U=Object.defineProperty;var T=a=>{throw TypeError(a)};var v=(a,t,e)=>t in a?U(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var A=(a,t,e)=>v(a,typeof t!="symbol"?t+"":t,e),L=(a,t,e)=>t.has(a)||T("Cannot "+e);var i=(a,t,e)=>(L(a,t,"read from private field"),e?e.call(a):t.get(a)),p=(a,t,e)=>t.has(a)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),x=(a,t,e,r)=>(L(a,t,"write to private field"),r?r.call(a,e):t.set(a,e),e),g=(a,t,e)=>(L(a,t,"access private method"),e);import{k,S as c,d as C,D as _,p as V,t as z,J as P}from"./WASQLiteDB.worker-BO2zAGn8.js";const H=512;class B{constructor(t,e){A(this,"name");A(this,"mxPathname",64);A(this,"_module");this.name=t,this._module=e}close(){}isReady(){return!0}hasAsyncMethod(t){return!1}xOpen(t,e,r,s,n){return k}xDelete(t,e,r){return c}xAccess(t,e,r,s){return c}xFullPathname(t,e,r,s){return c}xGetLastError(t,e,r){return c}xClose(t){return c}xRead(t,e,r,s,n){return c}xWrite(t,e,r,s,n){return c}xTruncate(t,e,r){return c}xSync(t,e){return c}xFileSize(t,e){return c}xLock(t,e){return c}xUnlock(t,e){return c}xCheckReservedLock(t,e){return c}xFileControl(t,e,r){return C}xSectorSize(t){return H}xDeviceCharacteristics(t){return 0}}const N=Object.getPrototypeOf(async function(){}).constructor,W=24405875n*8640000n;var d,S,R,D;class K extends B{constructor(e,r){super(e,r);p(this,d)}hasAsyncMethod(e){const r=`j${e.slice(1)}`;return this[r]instanceof N}getFilename(e){throw new Error("unimplemented")}jOpen(e,r,s,n){return k}jDelete(e,r){return c}jAccess(e,r,s){return c}jFullPathname(e,r){const{read:s,written:n}=new TextEncoder().encodeInto(e,r);return s<e.length?_:n>=r.length?_:(r[n]=0,c)}jGetLastError(e){return c}jClose(e){return c}jRead(e,r,s){return r.fill(0),V}jWrite(e,r,s){return z}jTruncate(e,r){return c}jSync(e,r){return c}jFileSize(e,r){return c}jLock(e,r){return c}jUnlock(e,r){return c}jCheckReservedLock(e,r){return r.setInt32(0,0,!0),c}jFileControl(e,r,s){return C}jSectorSize(e){return super.xSectorSize(e)}jDeviceCharacteristics(e){return 0}xOpen(e,r,s,n,h){var y;const l=g(this,d,D).call(this,r,n),f=g(this,d,S).call(this,"Int32",h);return(y=this.log)==null||y.call(this,"jOpen",l,s,"0x"+n.toString(16)),this.jOpen(l,s,n,f)}xRandomness(e,r,s){const n=new Uint8Array(r);crypto.getRandomValues(n);const h=s;return this._module.HEAPU8.set(n,h),r}xCurrentTimeInt64(e,r){const s=g(this,d,S).call(this,"BigInt64",r),n=BigInt(Date.now()),h=W+n;return s.setBigInt64(0,h,!0),c}xDelete(e,r,s){var h;const n=this._module.UTF8ToString(r);return(h=this.log)==null||h.call(this,"jDelete",n,s),this.jDelete(n,s)}xAccess(e,r,s,n){var f;const h=this._module.UTF8ToString(r),l=g(this,d,S).call(this,"Int32",n);return(f=this.log)==null||f.call(this,"jAccess",h,s),this.jAccess(h,s,l)}xFullPathname(e,r,s,n){var f;const h=this._module.UTF8ToString(r),l=this._module.HEAPU8.subarray(n,n+s);return(f=this.log)==null||f.call(this,"jFullPathname",h,s),this.jFullPathname(h,l)}xGetLastError(e,r,s){var h;const n=this._module.HEAPU8.subarray(s,s+r);return(h=this.log)==null||h.call(this,"jGetLastError",r),this.jGetLastError(n)}xClose(e){var r;return(r=this.log)==null||r.call(this,"jClose",e),this.jClose(e)}xRead(e,r,s,n,h){var y;const l=g(this,d,R).call(this,r,s),f=b(n,h);return(y=this.log)==null||y.call(this,"jRead",e,s,f),this.jRead(e,l,f)}xWrite(e,r,s,n,h){var y;const l=g(this,d,R).call(this,r,s),f=b(n,h);return(y=this.log)==null||y.call(this,"jWrite",e,l,f),this.jWrite(e,l,f)}xTruncate(e,r,s){var h;const n=b(r,s);return(h=this.log)==null||h.call(this,"jTruncate",e,n),this.jTruncate(e,n)}xSync(e,r){var s;return(s=this.log)==null||s.call(this,"jSync",e,r),this.jSync(e,r)}xFileSize(e,r){var n;const s=g(this,d,S).call(this,"BigInt64",r);return(n=this.log)==null||n.call(this,"jFileSize",e),this.jFileSize(e,s)}xLock(e,r){var s;return(s=this.log)==null||s.call(this,"jLock",e,r),this.jLock(e,r)}xUnlock(e,r){var s;return(s=this.log)==null||s.call(this,"jUnlock",e,r),this.jUnlock(e,r)}xCheckReservedLock(e,r){var n;const s=g(this,d,S).call(this,"Int32",r);return(n=this.log)==null||n.call(this,"jCheckReservedLock",e),this.jCheckReservedLock(e,s)}xFileControl(e,r,s){var h;const n=new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+s);return(h=this.log)==null||h.call(this,"jFileControl",e,r,n),this.jFileControl(e,r,n)}xSectorSize(e){var r;return(r=this.log)==null||r.call(this,"jSectorSize",e),this.jSectorSize(e)}xDeviceCharacteristics(e){var r;return(r=this.log)==null||r.call(this,"jDeviceCharacteristics",e),this.jDeviceCharacteristics(e)}}d=new WeakSet,S=function(e,r){return new G(this._module,r,e)},R=function(e,r){return new Q(this._module,e,r)},D=function(e,r){if(r&P){let s=e,n=1;const h=[];for(;n;){const l=this._module.HEAPU8[s++];if(l)h.push(l);else switch(this._module.HEAPU8[s]||(n=null),n){case 1:h.push(63),n=2;break;case 2:h.push(61),n=3;break;case 3:h.push(38),n=2;break}}return new TextDecoder().decode(new Uint8Array(h))}return e?this._module.UTF8ToString(e):null};function b(a,t){return t*4294967296+a+(a<0?2**32:0)}var E,O,o,u;class Q{constructor(t,e,r){p(this,o);p(this,E);p(this,O,new Uint8Array);x(this,E,t),this.byteOffset=e,this.length=this.byteLength=r}get buffer(){return i(this,o,u).buffer}at(t){return i(this,o,u).at(t)}copyWithin(t,e,r){i(this,o,u).copyWithin(t,e,r)}entries(){return i(this,o,u).entries()}every(t){return i(this,o,u).every(t)}fill(t,e,r){i(this,o,u).fill(t,e,r)}filter(t){return i(this,o,u).filter(t)}find(t){return i(this,o,u).find(t)}findIndex(t){return i(this,o,u).findIndex(t)}findLast(t){return i(this,o,u).findLast(t)}findLastIndex(t){return i(this,o,u).findLastIndex(t)}forEach(t){i(this,o,u).forEach(t)}includes(t,e){return i(this,o,u).includes(t,e)}indexOf(t,e){return i(this,o,u).indexOf(t,e)}join(t){return i(this,o,u).join(t)}keys(){return i(this,o,u).keys()}lastIndexOf(t,e){return i(this,o,u).lastIndexOf(t,e)}map(t){return i(this,o,u).map(t)}reduce(t,e){return i(this,o,u).reduce(t,e)}reduceRight(t,e){return i(this,o,u).reduceRight(t,e)}reverse(){i(this,o,u).reverse()}set(t,e){i(this,o,u).set(t,e)}slice(t,e){return i(this,o,u).slice(t,e)}some(t){return i(this,o,u).some(t)}sort(t){i(this,o,u).sort(t)}subarray(t,e){return i(this,o,u).subarray(t,e)}toLocaleString(t,e){return i(this,o,u).toLocaleString(t,e)}toReversed(){return i(this,o,u).toReversed()}toSorted(t){return i(this,o,u).toSorted(t)}toString(){return i(this,o,u).toString()}values(){return i(this,o,u).values()}with(t,e){return i(this,o,u).with(t,e)}[Symbol.iterator](){return i(this,o,u)[Symbol.iterator]()}}E=new WeakMap,O=new WeakMap,o=new WeakSet,u=function(){return i(this,O).buffer.byteLength===0&&x(this,O,i(this,E).HEAPU8.subarray(this.byteOffset,this.byteOffset+this.byteLength)),i(this,O)};var F,m,I,j,w;class G{constructor(t,e,r){p(this,j);p(this,F);p(this,m);p(this,I,new DataView(new ArrayBuffer(0)));x(this,F,t),this.byteOffset=e,x(this,m,r)}get buffer(){return i(this,j,w).buffer}get byteLength(){return i(this,m)==="Int32"?4:8}getInt32(t,e){if(i(this,m)!=="Int32")throw new Error("invalid type");if(!e)throw new Error("must be little endian");return i(this,j,w).getInt32(t,e)}setInt32(t,e,r){if(i(this,m)!=="Int32")throw new Error("invalid type");if(!r)throw new Error("must be little endian");i(this,j,w).setInt32(t,e,r)}getBigInt64(t,e){if(i(this,m)!=="BigInt64")throw new Error("invalid type");if(!e)throw new Error("must be little endian");return i(this,j,w).getBigInt64(t,e)}setBigInt64(t,e,r){if(i(this,m)!=="BigInt64")throw new Error("invalid type");if(!r)throw new Error("must be little endian");i(this,j,w).setBigInt64(t,e,r)}}F=new WeakMap,m=new WeakMap,I=new WeakMap,j=new WeakSet,w=function(){return i(this,I).buffer.byteLength===0&&x(this,I,new DataView(i(this,F).HEAPU8.buffer,i(this,F).HEAPU8.byteOffset+this.byteOffset)),i(this,I)};export{K as F};
